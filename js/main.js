'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}(function(){'use strict';function a(a){if(i=a,h.setNumber(i),i.length===l.limit){var b=l.candies.filter(function(a){return a.number===i})[0];b?h.set(b):h.setNull()}}function b(){m=!1,a(''),h.clear()}function c(a){return(l=k[a],!!l)&&(l.index=a,h.setPosition(l.position),b(),l)}function d(){j=[],c(0)}function e(a){console.log('Enviando votos');var b=a.map(function(a){var b=a.position,c=a.candies,d=a.vote,e=d?c.filter(function(a){return a.number===d})[0]||f.nullCandy():f.blankCandy(),g=e.name,h=e.party;return{position:b,vote:d,name:g,party:h}});console.table(b)}var f=function(){function a(b,c,d,e){_classCallCheck(this,a),this.img=e,this.name=c,this.party=d,this.number=b}return _createClass(a,null,[{key:'nullCandy',value:function nullCandy(){return new a('','N\xDAMERO ERRADO','VOTO NULO')}},{key:'blankCandy',value:function blankCandy(){return new a('','','VOTO EM BRANCO')}}]),a}(),g=function(){function a(b){_classCallCheck(this,a);var c=this.root=document.querySelector(b);c&&(this.position=c.querySelector('.display-position'),this.number=c.querySelector('.display-number'),this.img=c.querySelector('.display-img'),this.blank_img=this.img.src,this.name=c.querySelector('.display-name'),this.party=c.querySelector('.display-party'),this.body=c.querySelector('.display-body'),this.footer=c.querySelector('.display-footer'))}return _createClass(a,[{key:'setNumber',value:function(a){this.number.textContent=a.trim()}},{key:'setPosition',value:function setPosition(a){this.position.textContent=a.trim()}},{key:'set',value:function set(a){this.img.src=a.img||this.blank_img,this.name.textContent=a.name,this.party.textContent=a.party,this.body.removeAttribute('hidden'),this.footer.removeAttribute('hidden')}},{key:'setNull',value:function setNull(){this.set(f.nullCandy()),this.root.classList.add('is-null')}},{key:'setBlank',value:function setBlank(){this.set(f.blankCandy()),this.root.classList.add('is-blank')}},{key:'clear',value:function(){this.img.src=this.blank_img,this.name.textContent='',this.party.textContent='',this.body.setAttribute('hidden',!0),this.footer.setAttribute('hidden',!0),this.root.classList.remove('is-null'),this.root.classList.remove('is-blank')}}]),a}(),h=new g('.display'),i='',j=[],k=[],l={},m=!1,n={insert:function insert(b){return!m&&!(isNaN(b)||0>b)&&!(i.length>=l.limit)&&void a(i+b)},confirm:function confirm(){if((i.length===l.limit||m)&&(l.vote=i||null,j.push(l),!c(l.index+1))){var a=j;return c(0),d(),a}},blank:function blank(){m=!0,i||h.setBlank()},start:function start(a){k=a,c(0)},clear:b,votes:j,display:h},o=[{position:'Deputado Estadual',limit:5,candies:[new f('11111','Felipe Neto','PG','https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTV5hnJmF3GpbYq2nlLjgQzt8LVL2Ed1m4fq4tktKumc4PItNeRHQ'),new f('22222','Alexandre Ottoni','PJN','https://vignette.wikia.nocookie.net/jovem-nerd/images/3/33/Alexandre_Ottoni.jpg/revision/latest?cb=20130210162554&path-prefix=pt-br'),new f('33333','Deive Pazos','PO','https://skoob.s3.amazonaws.com/autores/15228/15228SK1449878482G.jpg'),new f('44444','Felipe Castanhari','PNos','https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSsBqEhIW8IEvDqu-sKxw3HPzlSwf1VSCoy4BLU_GAieFQQLn2s')]},{position:'Deputado Federal',limit:5,candies:[new f('11111','Silas Malafaia','PG','https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7GS7ipQfYgzU797Hu0eOiNn-yvMStP2t5h3U3Eqo3ldUNhVG2'),new f('22222','Yago Martins','PTeo','https://img.fstatic.com/J2-SVAOJj-NS7336X76iGe-WyDg=/195x289/smart/https://cdn.fstatic.com/media/artists/avatar/2014/03/yago-martins_a343683.jpg'),new f('33333','Kau\xEA Moura','PIJAMA','https://vignette.wikia.nocookie.net/youtubestars/images/c/ca/Cau%C3%AA_Moura.png/revision/latest?cb=20130501150941&path-prefix=pt-br'),new f('44444','Pirula','PSc','https://pbs.twimg.com/media/Cmdt6ukWEAQo0xR.jpg')]},{position:'Presidente',limit:2,candies:[new f('11','Rodrigo Bibo de Aquino','PTeo','http://cursos.bibotalk.com/wp-content/uploads/2017/04/bibo_1-e1491317883951.jpg'),new f('22','Marcos Castro','P do NPR','https://s1.vagalume.com/marcos-castro/images/profile-bigw314.jpg'),new f('33','Rogerinho do Ing\xE1','PC de C','https://dg31sz3gwrwan.cloudfront.net/actor/329292/427317_medium-optimized-2.jpg'),new f('44','\xC9rico Borgo','PO','https://conteudo.imguol.com.br/c/entretenimento/46/2015/11/17/erico-borgo---omelete-ccxp-2015-1447785701187_300x420.jpg')]}];n.display.root&&n.start(o);var p={digitar:function digitar(){n.insert(this.textContent.trim())},branco:function branco(){n.blank()},corrigir:function corrigir(){n.clear()},confirmar:function confirmar(){var a=n.confirm();a&&e(a)}};Array.prototype.forEach.call(document.querySelectorAll('.panel button'),function(a){return a.addEventListener('click',function(){p[this.dataset.click].call(this)})})})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic2V0TnVtYmVyIiwibGVuZ3RoIiwibGltaXQiLCJjYW5kaWVzIiwiZmlsdGVyIiwibnVtYmVyIiwic2V0Iiwic2V0TnVsbCIsImNsZWFyIiwiaW5kZXgiLCJzZXRQb3NpdGlvbiIsInBvc2l0aW9uIiwiY29uc29sZSIsImxvZyIsIm1hcCIsInZvdGUiLCJudWxsQ2FuZHkiLCJibGFua0NhbmR5IiwibmFtZSIsInBhcnR5IiwidGFibGUiLCJpbWciLCJyb290IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYmxhbmtfaW1nIiwic3JjIiwiYm9keSIsImZvb3RlciIsInRleHRDb250ZW50IiwidHJpbSIsInJlbW92ZUF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZSIsImluc2VydCIsImlzTmFOIiwiY29uZmlybSIsInB1c2giLCJibGFuayIsInNldEJsYW5rIiwic3RhcnQiLCJ2b3RlcyIsImRpc3BsYXkiLCJkaWdpdGFyIiwiYnJhbmNvIiwiY29ycmlnaXIiLCJjb25maXJtYXIiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkYXRhc2V0IiwiY2xpY2siXSwibWFwcGluZ3MiOiJ5WEFBQyxXQUFZLENBQ2IsYUE4R0EsYUFBd0IsQ0FHcEIsR0FGQSxHQUVBLENBREEsRUFBUUEsU0FBUixHQUNBLENBQUksRUFBT0MsTUFBUCxHQUFrQixFQUFLQyxLQUEzQixDQUFrQyxDQUM5QixHQUFNLEdBQVEsRUFBS0MsT0FBTCxDQUFhQyxNQUFiLENBQW9CLGtCQUFLLEdBQUVDLE1BQUYsSUFBTCxDQUFwQixFQUE4QyxDQUE5QyxDQUFkLENBRDhCLEVBRW5CLEVBQVFDLEdBQVIsR0FGbUIsQ0FHekIsRUFBUUMsT0FBUixFQUNSLENBQ0osQ0FFRCxZQUFpQixDQUNiLElBRGEsQ0FFYixFQUFVLEVB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cUMsU0FBckMsQ0FBZ0QsaUZBQWhELENBSEssQ0FJTCxNQUFVLElBQVYsQ0FBZ0IsZ0JBQWhCLENBQStCLElBQS9CLENBQXFDLHlIQUFyQyxDQUpLLENBSGIsQ0FwQmlCLENBdkpSLENBdUxULEVBQU95QyxPQUFQLENBQWV0QixJQXZMTixFQXVMWSxFQUFPb0IsS0FBUCxHQXZMWixDQXlMYixHQUFNLEdBQWMsQ0FDaEJHLFFBQVMsa0JBQVksQ0FDakIsRUFBT1QsTUFBUCxDQUFjLEtBQUtQLFdBQUwsQ0FBaUJDLElBQWpCLEVBQWQsQ0FDSCxDQUhlLENBSWhCZ0IsT0FBUSxpQkFBWSxDQUNoQixFQUFPTixLQUFQLEVBQ0gsQ0FOZSxDQU9oQk8sU0FBVSxtQkFBWSxDQUNsQixFQUFPdkMsS0FBUCxFQUNILENBVGUsQ0FVaEJ3QyxVQUFXLG9CQUFZLENBQ25CLEdBQU0sR0FBUSxFQUFPVixPQUFQLEVBQWQsQ0FDQSxHQUFTLElBQ1osQ0FiZSxDQUFwQixDQWdCQVcsTUFBTUMsU0FBTixDQUFnQkMsT0FBaEIsQ0FBd0JDLElBQXhCLENBQ0k3QixTQUFTOEIsZ0JBQVQsQ0FBMEIsZUFBMUIsQ0FESixDQUVJLGtCQUFPLEdBQUlDLGdCQUFKLENBQXFCLE9BQXJCLENBQThCLFVBQVksQ0FDN0MsRUFBWSxLQUFLQyxPQUFMLENBQWFDLEtBQXpCLEVBQWdDSixJQUFoQyxDQUFxQyxJQUFyQyxDQUNILENBRk0sQ0FBUCxDQUZKLENBbUNDLENBNU9BLEciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4ndXNlIHN0cmljdCc7XG5cbmNsYXNzIENhbmR5IHtcclxuICAgIGNvbnN0cnVjdG9yKG51bWJlciwgbmFtZSwgcGFydHksIGltZykge1xyXG4gICAgICAgIHRoaXMuaW1nID0gaW1nO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wYXJ0eSA9IHBhcnR5O1xyXG4gICAgICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIG51bGxDYW5keSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENhbmR5KCcnLCAnTsOaTUVSTyBFUlJBRE8nLCAnVk9UTyBOVUxPJyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYmxhbmtDYW5keSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENhbmR5KCcnLCAnJywgJ1ZPVE8gRU0gQlJBTkNPJyk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRGlzcGxheSB7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2hhdCkge1xyXG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLnJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHdoYXQpO1xyXG4gICAgICAgIGlmICghcm9vdCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSByb290LnF1ZXJ5U2VsZWN0b3IoJy5kaXNwbGF5LXBvc2l0aW9uJyk7XHJcbiAgICAgICAgdGhpcy5udW1iZXIgPSByb290LnF1ZXJ5U2VsZWN0b3IoJy5kaXNwbGF5LW51bWJlcicpO1xyXG4gICAgICAgIHRoaXMuaW1nID0gcm9vdC5xdWVyeVNlbGVjdG9yKCcuZGlzcGxheS1pbWcnKTtcclxuICAgICAgICB0aGlzLmJsYW5rX2ltZyA9IHRoaXMuaW1nLnNyYztcclxuICAgICAgICB0aGlzLm5hbWUgPSByb290LnF1ZXJ5U2VsZWN0b3IoJy5kaXNwbGF5LW5hbWUnKTtcclxuICAgICAgICB0aGlzLnBhcnR5ID0gcm9vdC5xdWVyeVNlbGVjdG9yKCcuZGlzcGxheS1wYXJ0eScpO1xyXG4gICAgICAgIHRoaXMuYm9keSA9IHJvb3QucXVlcnlTZWxlY3RvcignLmRpc3BsYXktYm9keScpO1xyXG4gICAgICAgIHRoaXMuZm9vdGVyID0gcm9vdC5xdWVyeVNlbGVjdG9yKCcuZGlzcGxheS1mb290ZXInKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXROdW1iZXIobikge1xyXG4gICAgICAgIHRoaXMubnVtYmVyLnRleHRDb250ZW50ID0gbi50cmltKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UG9zaXRpb24ocCkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24udGV4dENvbnRlbnQgPSBwLnRyaW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQoY2FuZHkpIHtcclxuICAgICAgICB0aGlzLmltZy5zcmMgPSBjYW5keS5pbWcgfHwgdGhpcy5ibGFua19pbWc7XHJcbiAgICAgICAgdGhpcy5uYW1lLnRleHRDb250ZW50ID0gY2FuZHkubmFtZTtcclxuICAgICAgICB0aGlzLnBhcnR5LnRleHRDb250ZW50ID0gY2FuZHkucGFydHk7XHJcbiAgICAgICAgdGhpcy5ib2R5LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgdGhpcy5mb290ZXIucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXROdWxsKCkge1xyXG4gICAgICAgIHRoaXMuc2V0KENhbmR5Lm51bGxDYW5keSgpKTtcclxuICAgICAgICB0aGlzLnJvb3QuY2xhc3NMaXN0LmFkZCgnaXMtbnVsbCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEJsYW5rKCkge1xyXG4gICAgICAgIHRoaXMuc2V0KENhbmR5LmJsYW5rQ2FuZHkoKSk7XHJcbiAgICAgICAgdGhpcy5yb290LmNsYXNzTGlzdC5hZGQoJ2lzLWJsYW5rJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5pbWcuc3JjID0gdGhpcy5ibGFua19pbWc7XHJcbiAgICAgICAgdGhpcy5uYW1lLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgdGhpcy5wYXJ0eS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIHRoaXMuYm9keS5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuZm9vdGVyLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5yb290LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLW51bGwnKTtcclxuICAgICAgICB0aGlzLnJvb3QuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYmxhbmsnKTtcclxuICAgIH1cclxuXHJcbn1cblxuY29uc3QgZGlzcGxheSA9IG5ldyBEaXNwbGF5KCcuZGlzcGxheScpO1xyXG5cclxubGV0IG51bWJlciA9ICcnO1xyXG5sZXQgdm90ZXMgPSBbXTtcclxubGV0IHN0ZXBzID0gW107XHJcbmxldCBzdGVwID0ge307XHJcbmxldCBpc0JsYW5rID0gZmFsc2U7XHJcblxyXG5jb25zdCBiYWxsb3QgPSB7XHJcbiAgICBpbnNlcnQ6IG51bSA9PiB7XHJcbiAgICAgICAgaWYgKGlzQmxhbmspIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoaXNOYU4obnVtKSB8fCBudW0gPCAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKG51bWJlci5sZW5ndGggPj0gc3RlcC5saW1pdCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHNldE51bWJlcihudW1iZXIgKyBudW0pO1xyXG4gICAgfSxcclxuICAgIGNvbmZpcm06ICgpID0+IHtcclxuICAgICAgICBpZiAobnVtYmVyLmxlbmd0aCA9PT0gc3RlcC5saW1pdCB8fCBpc0JsYW5rKSB7XHJcbiAgICAgICAgICAgIHN0ZXAudm90ZSA9IG51bWJlciB8fCBudWxsO1xyXG4gICAgICAgICAgICB2b3Rlcy5wdXNoKHN0ZXApO1xyXG4gICAgICAgICAgICBpZiAoIXNldFN0ZXAoc3RlcC5pbmRleCArIDEpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gdm90ZXM7XHJcbiAgICAgICAgICAgICAgICBzZXRTdGVwKDApO1xyXG4gICAgICAgICAgICAgICAgcmVzdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgYmxhbms6ICgpID0+IHtcclxuICAgICAgICBpc0JsYW5rID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIW51bWJlcikgZGlzcGxheS5zZXRCbGFuaygpO1xyXG4gICAgfSxcclxuICAgIHN0YXJ0OiAocykgPT4ge1xyXG4gICAgICAgIHN0ZXBzID0gcztcclxuICAgICAgICBzZXRTdGVwKDApO1xyXG4gICAgfSxcclxuICAgIGNsZWFyLFxyXG4gICAgdm90ZXMsXHJcbiAgICBkaXNwbGF5XHJcbn07XHJcblxyXG5mdW5jdGlvbiBzZXROdW1iZXIobnVtKSB7XHJcbiAgICBudW1iZXIgPSBudW07XHJcbiAgICBkaXNwbGF5LnNldE51bWJlcihudW1iZXIpO1xyXG4gICAgaWYgKG51bWJlci5sZW5ndGggPT09IHN0ZXAubGltaXQpIHtcclxuICAgICAgICBjb25zdCBjYW5keSA9IHN0ZXAuY2FuZGllcy5maWx0ZXIoYyA9PiBjLm51bWJlciA9PT0gbnVtYmVyKVswXTtcclxuICAgICAgICBpZiAoY2FuZHkpIGRpc3BsYXkuc2V0KGNhbmR5KTtcclxuICAgICAgICBlbHNlIGRpc3BsYXkuc2V0TnVsbCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhcigpIHtcclxuICAgIGlzQmxhbmsgPSBmYWxzZTtcclxuICAgIHNldE51bWJlcignJyk7XHJcbiAgICBkaXNwbGF5LmNsZWFyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFN0ZXAoaSkge1xyXG4gICAgc3RlcCA9IHN0ZXBzW2ldO1xyXG4gICAgaWYgKCFzdGVwKSByZXR1cm4gZmFsc2U7XHJcbiAgICBzdGVwLmluZGV4ID0gaTtcclxuICAgIGRpc3BsYXkuc2V0UG9zaXRpb24oc3RlcC5wb3NpdGlvbik7XHJcbiAgICBjbGVhcigpO1xyXG4gICAgcmV0dXJuIHN0ZXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc3RhcnQoKSB7XHJcbiAgICB2b3RlcyA9IFtdO1xyXG4gICAgc2V0U3RlcCgwKTtcclxufVxuXG4vLyBjb25zdCBGSVJFQkFTRV9BVVRIID0gZmlyZWJhc2UuYXV0aCgpO1xyXG4vLyBjb25zdCBGSVJFQkFTRV9EQVRBQkFTRSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7XHJcblxyXG4vKipcclxuICogVE9ETzogQ2FycmVnYXIgbGlzdGEgZGUgZWxlacOnw7VlcyB7dMOtdHVsbywgZGVzY3Jpw6fDo28sIHBhc3Nvc1t7cG9zaXRpb24sIGxpbWl0LCBjYW5kaWVzW119XX1cclxuICogVE9ETzogQ2FycmVnYXIgbGlzdGEgZGUgc2FsYXMgW3tub21lLCB0dXJtYSwgcGVyw61vZG99XVxyXG4gKiBUT0RPOiBJbnN0YW5jaWFyIHR1cm5vcyBkYSBlbGVpw6fDo28gW2Fub11cclxuICogVE9ETzogTGlzdGFyIHJlc3VsdGFkb3NcclxuICovXHJcblxyXG5jb25zdCBiYWxsb3Rfc3RlcHMgPSBbe1xyXG4gICAgICAgIHBvc2l0aW9uOiAnRGVwdXRhZG8gRXN0YWR1YWwnLFxyXG4gICAgICAgIGxpbWl0OiA1LFxyXG4gICAgICAgIGNhbmRpZXM6IFtcclxuICAgICAgICAgICAgbmV3IENhbmR5KCcxMTExMScsICdGZWxpcGUgTmV0bycsICdQRycsICdodHRwczovL2VuY3J5cHRlZC10Ym4wLmdzdGF0aWMuY29tL2ltYWdlcz9xPXRibjpBTmQ5R2NUVjVobkptRjNHcGJZcTJubExqZ1F6dDhMVkwyRWQxbTRmcTR0a3RLdW1jNFBJdE5lUkhRJyksXHJcbiAgICAgICAgICAgIG5ldyBDYW5keSgnMjIyMjInLCAnQWxleGFuZHJlIE90dG9uaScsICdQSk4nLCAnaHR0cHM6Ly92aWduZXR0ZS53aWtpYS5ub2Nvb2tpZS5uZXQvam92ZW0tbmVyZC9pbWFnZXMvMy8zMy9BbGV4YW5kcmVfT3R0b25pLmpwZy9yZXZpc2lvbi9sYXRlc3Q/Y2I9MjAxMzAyMTAxNjI1NTQmcGF0aC1wcmVmaXg9cHQtYnInKSxcclxuICAgICAgICAgICAgbmV3IENhbmR5KCczMzMzMycsICdEZWl2ZSBQYXpvcycsICdQTycsICdodHRwczovL3Nrb29iLnMzLmFtYXpvbmF3cy5jb20vYXV0b3Jlcy8xNTIyOC8xNTIyOFNLMTQ0OTg3ODQ4MkcuanBnJyksXHJcbiAgICAgICAgICAgIG5ldyBDYW5keSgnNDQ0NDQnLCAnRmVsaXBlIENhc3RhbmhhcmknLCAnUE5vcycsICdodHRwczovL2VuY3J5cHRlZC10Ym4wLmdzdGF0aWMuY29tL2ltYWdlcz9xPXRibjpBTmQ5R2NTc0JxRWhJVzhJRXZEcXUtc0t4dzNIUHpsU3dmMVZTQ295NEJMVV9HQWllRlFRTG4ycycpXHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBwb3NpdGlvbjogJ0RlcHV0YWRvIEZlZGVyYWwnLFxyXG4gICAgICAgIGxpbWl0OiA1LFxyXG4gICAgICAgIGNhbmRpZXM6IFtcclxuICAgICAgICAgICAgbmV3IENhbmR5KCcxMTExMScsICdTaWxhcyBNYWxhZmFpYScsICdQRycsICdodHRwczovL2VuY3J5cHRlZC10Ym4wLmdzdGF0aWMuY29tL2ltYWdlcz9xPXRibjpBTmQ5R2NUN0dTN2lwUWZZZ3pVNzk3SHUwZU9pTm4teXZNU3RQMnQ1aDNVM0VxbzNsZFVOaFZHMicpLFxyXG4gICAgICAgICAgICBuZXcgQ2FuZHkoJzIyMjIyJywgJ1lhZ28gTWFydGlucycsICdQVGVvJywgJ2h0dHBzOi8vaW1nLmZzdGF0aWMuY29tL0oyLVNWQU9Kai1OUzczMzZYNzZpR2UtV3lEZz0vMTk1eDI4OS9zbWFydC9odHRwczovL2Nkbi5mc3RhdGljLmNvbS9tZWRpYS9hcnRpc3RzL2F2YXRhci8yMDE0LzAzL3lhZ28tbWFydGluc19hMzQzNjgzLmpwZycpLFxyXG4gICAgICAgICAgICBuZXcgQ2FuZHkoJzMzMzMzJywgJ0thdcOqIE1vdXJhJywgJ1BJSkFNQScsICdodHRwczovL3ZpZ25ldHRlLndpa2lhLm5vY29va2llLm5ldC95b3V0dWJlc3RhcnMvaW1hZ2VzL2MvY2EvQ2F1JUMzJUFBX01vdXJhLnBuZy9yZXZpc2lvbi9sYXRlc3Q/Y2I9MjAxMzA1MDExNTA5NDEmcGF0aC1wcmVmaXg9cHQtYnInKSxcclxuICAgICAgICAgICAgbmV3IENhbmR5KCc0NDQ0NCcsICdQaXJ1bGEnLCAnUFNjJywgJ2h0dHBzOi8vcGJzLnR3aW1nLmNvbS9tZWRpYS9DbWR0NnVrV0VBUW8weFIuanBnJylcclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHBvc2l0aW9uOiAnUHJlc2lkZW50ZScsXHJcbiAgICAgICAgbGltaXQ6IDIsXHJcbiAgICAgICAgY2FuZGllczogW1xyXG4gICAgICAgICAgICBuZXcgQ2FuZHkoJzExJywgJ1JvZHJpZ28gQmlibyBkZSBBcXVpbm8nLCAnUFRlbycsICdodHRwOi8vY3Vyc29zLmJpYm90YWxrLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxNy8wNC9iaWJvXzEtZTE0OTEzMTc4ODM5NTEuanBnJyksXHJcbiAgICAgICAgICAgIG5ldyBDYW5keSgnMjInLCAnTWFyY29zIENhc3RybycsICdQIGRvIE5QUicsICdodHRwczovL3MxLnZhZ2FsdW1lLmNvbS9tYXJjb3MtY2FzdHJvL2ltYWdlcy9wcm9maWxlLWJpZ3czMTQuanBnJyksXHJcbiAgICAgICAgICAgIG5ldyBDYW5keSgnMzMnLCAnUm9nZXJpbmhvIGRvIEluZ8OhJywgJ1BDIGRlIEMnLCAnaHR0cHM6Ly9kZzMxc3ozZ3dyd2FuLmNsb3VkZnJvbnQubmV0L2FjdG9yLzMyOTI5Mi80MjczMTdfbWVkaXVtLW9wdGltaXplZC0yLmpwZycpLFxyXG4gICAgICAgICAgICBuZXcgQ2FuZHkoJzQ0JywgJ8OJcmljbyBCb3JnbycsICdQTycsICdodHRwczovL2NvbnRldWRvLmltZ3VvbC5jb20uYnIvYy9lbnRyZXRlbmltZW50by80Ni8yMDE1LzExLzE3L2VyaWNvLWJvcmdvLS0tb21lbGV0ZS1jY3hwLTIwMTUtMTQ0Nzc4NTcwMTE4N18zMDB4NDIwLmpwZycpXHJcbiAgICAgICAgXVxyXG4gICAgfVxyXG5dO1xyXG5cclxuaWYgKGJhbGxvdC5kaXNwbGF5LnJvb3QpIGJhbGxvdC5zdGFydChiYWxsb3Rfc3RlcHMpO1xyXG5cclxuY29uc3QgcGFuZWxBY3Rpb24gPSB7XHJcbiAgICBkaWdpdGFyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYmFsbG90Lmluc2VydCh0aGlzLnRleHRDb250ZW50LnRyaW0oKSk7XHJcbiAgICB9LFxyXG4gICAgYnJhbmNvOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYmFsbG90LmJsYW5rKCk7XHJcbiAgICB9LFxyXG4gICAgY29ycmlnaXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBiYWxsb3QuY2xlYXIoKTtcclxuICAgIH0sXHJcbiAgICBjb25maXJtYXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCB2b3RlcyA9IGJhbGxvdC5jb25maXJtKCk7XHJcbiAgICAgICAgdm90ZXMgJiYgc2VuZEJhbGxvdCh2b3Rlcyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhbmVsIGJ1dHRvbicpLFxyXG4gICAgYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBwYW5lbEFjdGlvblt0aGlzLmRhdGFzZXQuY2xpY2tdLmNhbGwodGhpcyk7XHJcbiAgICB9KVxyXG4pO1xyXG5cclxuZnVuY3Rpb24gc2VuZEJhbGxvdCh2b3Rlcykge1xyXG4gICAgY29uc29sZS5sb2coJ0VudmlhbmRvIHZvdG9zJyk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0cyA9IHZvdGVzLm1hcCh2ID0+IHtcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uLFxyXG4gICAgICAgICAgICBjYW5kaWVzLFxyXG4gICAgICAgICAgICB2b3RlXHJcbiAgICAgICAgfSA9IHY7XHJcbiAgICAgICAgY29uc3QgY2FuZHkgPSAhdm90ZSA/XHJcbiAgICAgICAgICAgIENhbmR5LmJsYW5rQ2FuZHkoKSA6XHJcbiAgICAgICAgICAgIGNhbmRpZXMuZmlsdGVyKGMgPT4gYy5udW1iZXIgPT09IHZvdGUpWzBdIHx8XHJcbiAgICAgICAgICAgIENhbmR5Lm51bGxDYW5keSgpO1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgcGFydHlcclxuICAgICAgICB9ID0gY2FuZHk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcG9zaXRpb24sXHJcbiAgICAgICAgICAgIHZvdGUsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHBhcnR5XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUudGFibGUocmVzdWx0cyk7XHJcbn1cblxufSgpKTtcbiJdfQ==
